"use strict";var nr=Object.defineProperty;var sr=(e,r,t)=>r in e?nr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var b=(e,r,t)=>sr(e,typeof r!="symbol"?r+"":r,t);function S(e){return e!==null&&typeof e=="object"&&"then"in e&&typeof e.then=="function"}function ir(e){const r=Object.assign(t=>()=>{const a=r.current;return r.current=t,()=>{r.current=a}},{current:e,override:t=>{r.current=t},reset:()=>{r.current=e}});return r}function or(e,r){const t=[];for(const a of e)t.push(a());try{return r()}finally{for(const a of t.reverse())a()}}const z=Object.assign(ir,{use:or}),m=z(),ur=()=>{};class lr{constructor(r){b(this,"_listeners");b(this,"_settledPayload");b(this,"_isSettled",!1);b(this,"size",()=>this._listeners.size);b(this,"settled",()=>this._isSettled);b(this,"forEach",r=>{this._listeners.forEach(r)});b(this,"on",(r,t)=>{let a;if(t===void 0)a=Array.isArray(r)?r:[r];else{const n=r,i=Array.isArray(t)?t:[t];a=[o=>{const c=n(o);if(c)for(let l=0;l<i.length;l++)i[l](c.value)}]}if(this._isSettled){const n=this._settledPayload;for(let i=0;i<a.length;i++)a[i](n);return ur}const s=this._listeners;for(let n=0;n<a.length;n++)s.add(a[n]);return()=>{for(let n=0;n<a.length;n++)s.delete(a[n])}});b(this,"emit",r=>{this._isSettled||this._doEmit(r,!1,!1)});b(this,"emitLifo",r=>{this._isSettled||this._doEmit(r,!1,!0)});b(this,"clear",()=>{this._listeners.clear()});b(this,"emitAndClear",r=>{this._isSettled||this._doEmit(r,!0,!1)});b(this,"emitAndClearLifo",r=>{this._isSettled||this._doEmit(r,!0,!0)});b(this,"settle",r=>{this._isSettled||(this._settledPayload=r,this._isSettled=!0,this._doEmit(r,!0,!1))});b(this,"_doEmit",(r,t,a)=>{const s=this._listeners,n=s.size;if(n===0)return;const i=Array.from(s);if(t&&s.clear(),a)for(let o=n-1;o>=0;o--)i[o](r);else for(let o=0;o<n;o++)i[o](r)});this._listeners=new Set(r)}}function qe(e){return new lr(e)}var F=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function fr(){this.__data__=[],this.size=0}var vr=fr;function dr(e,r){return e===r||e!==e&&r!==r}var Re=dr,hr=Re;function gr(e,r){for(var t=e.length;t--;)if(hr(e[t][0],r))return t;return-1}var B=gr,yr=B,pr=Array.prototype,_r=pr.splice;function br(e){var r=this.__data__,t=yr(r,e);if(t<0)return!1;var a=r.length-1;return t==a?r.pop():_r.call(r,t,1),--this.size,!0}var $r=br,mr=B;function Ar(e){var r=this.__data__,t=mr(r,e);return t<0?void 0:r[t][1]}var Tr=Ar,Sr=B;function jr(e){return Sr(this.__data__,e)>-1}var wr=jr,Or=B;function Pr(e,r){var t=this.__data__,a=Or(t,e);return a<0?(++this.size,t.push([e,r])):t[a][1]=r,this}var Er=Pr,Cr=vr,Ir=$r,Lr=Tr,Dr=wr,Mr=Er;function w(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}w.prototype.clear=Cr;w.prototype.delete=Ir;w.prototype.get=Lr;w.prototype.has=Dr;w.prototype.set=Mr;var V=w,Gr=V;function xr(){this.__data__=new Gr,this.size=0}var Fr=xr;function qr(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}var Rr=qr;function kr(e){return this.__data__.get(e)}var zr=kr;function Nr(e){return this.__data__.has(e)}var Hr=Nr,Ur=typeof F=="object"&&F&&F.Object===Object&&F,ke=Ur,Br=ke,Vr=typeof self=="object"&&self&&self.Object===Object&&self,Kr=Br||Vr||Function("return this")(),A=Kr,Wr=A,Jr=Wr.Symbol,oe=Jr,fe=oe,ze=Object.prototype,Xr=ze.hasOwnProperty,Yr=ze.toString,D=fe?fe.toStringTag:void 0;function Zr(e){var r=Xr.call(e,D),t=e[D];try{e[D]=void 0;var a=!0}catch{}var s=Yr.call(e);return a&&(r?e[D]=t:delete e[D]),s}var Qr=Zr,et=Object.prototype,rt=et.toString;function tt(e){return rt.call(e)}var at=tt,ve=oe,nt=Qr,st=at,it="[object Null]",ot="[object Undefined]",de=ve?ve.toStringTag:void 0;function ut(e){return e==null?e===void 0?ot:it:de&&de in Object(e)?nt(e):st(e)}var K=ut;function lt(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var Ne=lt,ct=K,ft=Ne,vt="[object AsyncFunction]",dt="[object Function]",ht="[object GeneratorFunction]",gt="[object Proxy]";function yt(e){if(!ft(e))return!1;var r=ct(e);return r==dt||r==ht||r==vt||r==gt}var He=yt,pt=A,_t=pt["__core-js_shared__"],bt=_t,Y=bt,he=function(){var e=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function $t(e){return!!he&&he in e}var mt=$t,At=Function.prototype,Tt=At.toString;function St(e){if(e!=null){try{return Tt.call(e)}catch{}try{return e+""}catch{}}return""}var Ue=St,jt=He,wt=mt,Ot=Ne,Pt=Ue,Et=/[\\^$.*+?()[\]{}|]/g,Ct=/^\[object .+?Constructor\]$/,It=Function.prototype,Lt=Object.prototype,Dt=It.toString,Mt=Lt.hasOwnProperty,Gt=RegExp("^"+Dt.call(Mt).replace(Et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xt(e){if(!Ot(e)||wt(e))return!1;var r=jt(e)?Gt:Ct;return r.test(Pt(e))}var Ft=xt;function qt(e,r){return e==null?void 0:e[r]}var Rt=qt,kt=Ft,zt=Rt;function Nt(e,r){var t=zt(e,r);return kt(t)?t:void 0}var O=Nt,Ht=O,Ut=A,Bt=Ht(Ut,"Map"),ue=Bt,Vt=O,Kt=Vt(Object,"create"),W=Kt,ge=W;function Wt(){this.__data__=ge?ge(null):{},this.size=0}var Jt=Wt;function Xt(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var Yt=Xt,Zt=W,Qt="__lodash_hash_undefined__",ea=Object.prototype,ra=ea.hasOwnProperty;function ta(e){var r=this.__data__;if(Zt){var t=r[e];return t===Qt?void 0:t}return ra.call(r,e)?r[e]:void 0}var aa=ta,na=W,sa=Object.prototype,ia=sa.hasOwnProperty;function oa(e){var r=this.__data__;return na?r[e]!==void 0:ia.call(r,e)}var ua=oa,la=W,ca="__lodash_hash_undefined__";function fa(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=la&&r===void 0?ca:r,this}var va=fa,da=Jt,ha=Yt,ga=aa,ya=ua,pa=va;function P(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}P.prototype.clear=da;P.prototype.delete=ha;P.prototype.get=ga;P.prototype.has=ya;P.prototype.set=pa;var _a=P,ye=_a,ba=V,$a=ue;function ma(){this.size=0,this.__data__={hash:new ye,map:new($a||ba),string:new ye}}var Aa=ma;function Ta(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}var Sa=Ta,ja=Sa;function wa(e,r){var t=e.__data__;return ja(r)?t[typeof r=="string"?"string":"hash"]:t.map}var J=wa,Oa=J;function Pa(e){var r=Oa(this,e).delete(e);return this.size-=r?1:0,r}var Ea=Pa,Ca=J;function Ia(e){return Ca(this,e).get(e)}var La=Ia,Da=J;function Ma(e){return Da(this,e).has(e)}var Ga=Ma,xa=J;function Fa(e,r){var t=xa(this,e),a=t.size;return t.set(e,r),this.size+=t.size==a?0:1,this}var qa=Fa,Ra=Aa,ka=Ea,za=La,Na=Ga,Ha=qa;function E(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}E.prototype.clear=Ra;E.prototype.delete=ka;E.prototype.get=za;E.prototype.has=Na;E.prototype.set=Ha;var Be=E,Ua=V,Ba=ue,Va=Be,Ka=200;function Wa(e,r){var t=this.__data__;if(t instanceof Ua){var a=t.__data__;if(!Ba||a.length<Ka-1)return a.push([e,r]),this.size=++t.size,this;t=this.__data__=new Va(a)}return t.set(e,r),this.size=t.size,this}var Ja=Wa,Xa=V,Ya=Fr,Za=Rr,Qa=zr,en=Hr,rn=Ja;function C(e){var r=this.__data__=new Xa(e);this.size=r.size}C.prototype.clear=Ya;C.prototype.delete=Za;C.prototype.get=Qa;C.prototype.has=en;C.prototype.set=rn;var tn=C,an="__lodash_hash_undefined__";function nn(e){return this.__data__.set(e,an),this}var sn=nn;function on(e){return this.__data__.has(e)}var un=on,ln=Be,cn=sn,fn=un;function N(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new ln;++r<t;)this.add(e[r])}N.prototype.add=N.prototype.push=cn;N.prototype.has=fn;var vn=N;function dn(e,r){for(var t=-1,a=e==null?0:e.length;++t<a;)if(r(e[t],t,e))return!0;return!1}var hn=dn;function gn(e,r){return e.has(r)}var yn=gn,pn=vn,_n=hn,bn=yn,$n=1,mn=2;function An(e,r,t,a,s,n){var i=t&$n,o=e.length,c=r.length;if(o!=c&&!(i&&c>o))return!1;var l=n.get(e),y=n.get(r);if(l&&y)return l==r&&y==e;var g=-1,u=!0,v=t&mn?new pn:void 0;for(n.set(e,r),n.set(r,e);++g<o;){var f=e[g],d=r[g];if(a)var _=i?a(d,f,g,r,e,n):a(f,d,g,e,r,n);if(_!==void 0){if(_)continue;u=!1;break}if(v){if(!_n(r,function(p,$){if(!bn(v,$)&&(f===p||s(f,p,t,a,n)))return v.push($)})){u=!1;break}}else if(!(f===d||s(f,d,t,a,n))){u=!1;break}}return n.delete(e),n.delete(r),u}var Ve=An,Tn=A,Sn=Tn.Uint8Array,jn=Sn;function wn(e){var r=-1,t=Array(e.size);return e.forEach(function(a,s){t[++r]=[s,a]}),t}var On=wn;function Pn(e){var r=-1,t=Array(e.size);return e.forEach(function(a){t[++r]=a}),t}var En=Pn,pe=oe,_e=jn,Cn=Re,In=Ve,Ln=On,Dn=En,Mn=1,Gn=2,xn="[object Boolean]",Fn="[object Date]",qn="[object Error]",Rn="[object Map]",kn="[object Number]",zn="[object RegExp]",Nn="[object Set]",Hn="[object String]",Un="[object Symbol]",Bn="[object ArrayBuffer]",Vn="[object DataView]",be=pe?pe.prototype:void 0,Z=be?be.valueOf:void 0;function Kn(e,r,t,a,s,n,i){switch(t){case Vn:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Bn:return!(e.byteLength!=r.byteLength||!n(new _e(e),new _e(r)));case xn:case Fn:case kn:return Cn(+e,+r);case qn:return e.name==r.name&&e.message==r.message;case zn:case Hn:return e==r+"";case Rn:var o=Ln;case Nn:var c=a&Mn;if(o||(o=Dn),e.size!=r.size&&!c)return!1;var l=i.get(e);if(l)return l==r;a|=Gn,i.set(e,r);var y=In(o(e),o(r),a,s,n,i);return i.delete(e),y;case Un:if(Z)return Z.call(e)==Z.call(r)}return!1}var Wn=Kn;function Jn(e,r){for(var t=-1,a=r.length,s=e.length;++t<a;)e[s+t]=r[t];return e}var Xn=Jn,Yn=Array.isArray,le=Yn,Zn=Xn,Qn=le;function es(e,r,t){var a=r(e);return Qn(e)?a:Zn(a,t(e))}var rs=es;function ts(e,r){for(var t=-1,a=e==null?0:e.length,s=0,n=[];++t<a;){var i=e[t];r(i,t,e)&&(n[s++]=i)}return n}var as=ts;function ns(){return[]}var ss=ns,is=as,os=ss,us=Object.prototype,ls=us.propertyIsEnumerable,$e=Object.getOwnPropertySymbols,cs=$e?function(e){return e==null?[]:(e=Object(e),is($e(e),function(r){return ls.call(e,r)}))}:os,fs=cs;function vs(e,r){for(var t=-1,a=Array(e);++t<e;)a[t]=r(t);return a}var ds=vs;function hs(e){return e!=null&&typeof e=="object"}var X=hs,gs=K,ys=X,ps="[object Arguments]";function _s(e){return ys(e)&&gs(e)==ps}var bs=_s,me=bs,$s=X,Ke=Object.prototype,ms=Ke.hasOwnProperty,As=Ke.propertyIsEnumerable,Ts=me(function(){return arguments}())?me:function(e){return $s(e)&&ms.call(e,"callee")&&!As.call(e,"callee")},Ss=Ts,H={exports:{}};function js(){return!1}var ws=js;H.exports;(function(e,r){var t=A,a=ws,s=r&&!r.nodeType&&r,n=s&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===s,o=i?t.Buffer:void 0,c=o?o.isBuffer:void 0,l=c||a;e.exports=l})(H,H.exports);var We=H.exports,Os=9007199254740991,Ps=/^(?:0|[1-9]\d*)$/;function Es(e,r){var t=typeof e;return r=r??Os,!!r&&(t=="number"||t!="symbol"&&Ps.test(e))&&e>-1&&e%1==0&&e<r}var Cs=Es,Is=9007199254740991;function Ls(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Is}var Je=Ls,Ds=K,Ms=Je,Gs=X,xs="[object Arguments]",Fs="[object Array]",qs="[object Boolean]",Rs="[object Date]",ks="[object Error]",zs="[object Function]",Ns="[object Map]",Hs="[object Number]",Us="[object Object]",Bs="[object RegExp]",Vs="[object Set]",Ks="[object String]",Ws="[object WeakMap]",Js="[object ArrayBuffer]",Xs="[object DataView]",Ys="[object Float32Array]",Zs="[object Float64Array]",Qs="[object Int8Array]",ei="[object Int16Array]",ri="[object Int32Array]",ti="[object Uint8Array]",ai="[object Uint8ClampedArray]",ni="[object Uint16Array]",si="[object Uint32Array]",h={};h[Ys]=h[Zs]=h[Qs]=h[ei]=h[ri]=h[ti]=h[ai]=h[ni]=h[si]=!0;h[xs]=h[Fs]=h[Js]=h[qs]=h[Xs]=h[Rs]=h[ks]=h[zs]=h[Ns]=h[Hs]=h[Us]=h[Bs]=h[Vs]=h[Ks]=h[Ws]=!1;function ii(e){return Gs(e)&&Ms(e.length)&&!!h[Ds(e)]}var oi=ii;function ui(e){return function(r){return e(r)}}var li=ui,U={exports:{}};U.exports;(function(e,r){var t=ke,a=r&&!r.nodeType&&r,s=a&&!0&&e&&!e.nodeType&&e,n=s&&s.exports===a,i=n&&t.process,o=function(){try{var c=s&&s.require&&s.require("util").types;return c||i&&i.binding&&i.binding("util")}catch{}}();e.exports=o})(U,U.exports);var ci=U.exports,fi=oi,vi=li,Ae=ci,Te=Ae&&Ae.isTypedArray,di=Te?vi(Te):fi,Xe=di,hi=ds,gi=Ss,yi=le,pi=We,_i=Cs,bi=Xe,$i=Object.prototype,mi=$i.hasOwnProperty;function Ai(e,r){var t=yi(e),a=!t&&gi(e),s=!t&&!a&&pi(e),n=!t&&!a&&!s&&bi(e),i=t||a||s||n,o=i?hi(e.length,String):[],c=o.length;for(var l in e)(r||mi.call(e,l))&&!(i&&(l=="length"||s&&(l=="offset"||l=="parent")||n&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||_i(l,c)))&&o.push(l);return o}var Ti=Ai,Si=Object.prototype;function ji(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||Si;return e===t}var wi=ji;function Oi(e,r){return function(t){return e(r(t))}}var Pi=Oi,Ei=Pi,Ci=Ei(Object.keys,Object),Ii=Ci,Li=wi,Di=Ii,Mi=Object.prototype,Gi=Mi.hasOwnProperty;function xi(e){if(!Li(e))return Di(e);var r=[];for(var t in Object(e))Gi.call(e,t)&&t!="constructor"&&r.push(t);return r}var Fi=xi,qi=He,Ri=Je;function ki(e){return e!=null&&Ri(e.length)&&!qi(e)}var zi=ki,Ni=Ti,Hi=Fi,Ui=zi;function Bi(e){return Ui(e)?Ni(e):Hi(e)}var Vi=Bi,Ki=rs,Wi=fs,Ji=Vi;function Xi(e){return Ki(e,Ji,Wi)}var Yi=Xi,Se=Yi,Zi=1,Qi=Object.prototype,eo=Qi.hasOwnProperty;function ro(e,r,t,a,s,n){var i=t&Zi,o=Se(e),c=o.length,l=Se(r),y=l.length;if(c!=y&&!i)return!1;for(var g=c;g--;){var u=o[g];if(!(i?u in r:eo.call(r,u)))return!1}var v=n.get(e),f=n.get(r);if(v&&f)return v==r&&f==e;var d=!0;n.set(e,r),n.set(r,e);for(var _=i;++g<c;){u=o[g];var p=e[u],$=r[u];if(a)var L=i?a($,p,u,r,e,n):a(p,$,u,e,r,n);if(!(L===void 0?p===$||s(p,$,t,a,n):L)){d=!1;break}_||(_=u=="constructor")}if(d&&!_){var G=e.constructor,x=r.constructor;G!=x&&"constructor"in e&&"constructor"in r&&!(typeof G=="function"&&G instanceof G&&typeof x=="function"&&x instanceof x)&&(d=!1)}return n.delete(e),n.delete(r),d}var to=ro,ao=O,no=A,so=ao(no,"DataView"),io=so,oo=O,uo=A,lo=oo(uo,"Promise"),co=lo,fo=O,vo=A,ho=fo(vo,"Set"),go=ho,yo=O,po=A,_o=yo(po,"WeakMap"),bo=_o,ee=io,re=ue,te=co,ae=go,ne=bo,Ye=K,I=Ue,je="[object Map]",$o="[object Object]",we="[object Promise]",Oe="[object Set]",Pe="[object WeakMap]",Ee="[object DataView]",mo=I(ee),Ao=I(re),To=I(te),So=I(ae),jo=I(ne),T=Ye;(ee&&T(new ee(new ArrayBuffer(1)))!=Ee||re&&T(new re)!=je||te&&T(te.resolve())!=we||ae&&T(new ae)!=Oe||ne&&T(new ne)!=Pe)&&(T=function(e){var r=Ye(e),t=r==$o?e.constructor:void 0,a=t?I(t):"";if(a)switch(a){case mo:return Ee;case Ao:return je;case To:return we;case So:return Oe;case jo:return Pe}return r});var wo=T,Q=tn,Oo=Ve,Po=Wn,Eo=to,Ce=wo,Ie=le,Le=We,Co=Xe,Io=1,De="[object Arguments]",Me="[object Array]",q="[object Object]",Lo=Object.prototype,Ge=Lo.hasOwnProperty;function Do(e,r,t,a,s,n){var i=Ie(e),o=Ie(r),c=i?Me:Ce(e),l=o?Me:Ce(r);c=c==De?q:c,l=l==De?q:l;var y=c==q,g=l==q,u=c==l;if(u&&Le(e)){if(!Le(r))return!1;i=!0,y=!1}if(u&&!y)return n||(n=new Q),i||Co(e)?Oo(e,r,t,a,s,n):Po(e,r,c,t,a,s,n);if(!(t&Io)){var v=y&&Ge.call(e,"__wrapped__"),f=g&&Ge.call(r,"__wrapped__");if(v||f){var d=v?e.value():e,_=f?r.value():r;return n||(n=new Q),s(d,_,t,a,n)}}return u?(n||(n=new Q),Eo(e,r,t,a,s,n)):!1}var Mo=Do,Go=Mo,xe=X;function Ze(e,r,t,a,s){return e===r?!0:e==null||r==null||!xe(e)&&!xe(r)?e!==e&&r!==r:Go(e,r,t,a,Ze,s)}var xo=Ze,Fo=xo;function qo(e,r){return Fo(e,r)}var Ro=qo;const ko=cr(Ro);function zo(e,r){return Object.is(e,r)}function M(e,r,t=Object.is){if(Object.is(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;const a=Object.keys(e),s=Object.keys(r);if(a.length!==s.length)return!1;for(const n of a)if(!Object.prototype.hasOwnProperty.call(r,n)||!t(e[n],r[n]))return!1;return!0}function Qe(e,r){return M(e,r,M)}function No(e,r){return M(e,r,Qe)}const Ho=ko;function er(e){return!e||e==="strict"?zo:e==="shallow"?M:e==="shallow2"?Qe:e==="shallow3"?No:e==="deep"?Ho:e}function Fe(e){const r=e;let t=e;return Object.assign((...a)=>t(...a),{getOriginal:()=>r,getCurrent:()=>t,setCurrent(a){t=a}})}function Uo(e){return typeof e=="function"&&"getOriginal"in e&&"getCurrent"in e&&"setCurrent"in e}function Bo(e,r,t){return e?typeof r=="function"?Uo(e.value)?(e.value.setCurrent(r),[e.value,!0]):[Fe(r),!1]:r&&r instanceof Date?e.value&&e.value instanceof Date&&r.getTime()===e.value.getTime()?[e.value,!0]:[r,!1]:t(e.value,r)?[e.value,!0]:[r,!1]:typeof r=="function"?[Fe(r),!1]:[r,!1]}const se=z(e=>e());function rr(e={}){const r=qe(),t=er(e.equals),a=e.hasFallback??!1,s=e.fallback;let n,i=!1,o,c=Promise.resolve(void 0),l=0,y,g=!1;const u=()=>{r.forEach(d=>{se.current(d)})},v=()=>n===void 0&&!i&&o===void 0;return{getValue:()=>a&&(i||o!==void 0)?y??s:n,getLoading:()=>i,getError:()=>o,getPromise:()=>c,getVersion:()=>l,isVersionStale:d=>d!==l,stale:()=>a&&(i||o!==void 0),isDirty:()=>g,markDirty:()=>{g=!0},clearDirty:()=>{g=!1},setValue:(d,_=!1)=>{n!==void 0&&t(d,n)&&!i&&o===void 0||(n=d,i=!1,o=void 0,c=Promise.resolve(d),l++,y=d,_||u())},setLoading:(d,_=!1)=>{n=void 0,i=!0,o=void 0,c=d,l++,_||u()},setError:(d,_=!1)=>{Object.is(o,d)&&!i&&n===void 0||(n=void 0,i=!1,o=d,l++,_||u())},reset:()=>{v()&&y===void 0&&!g||(n=void 0,i=!1,o=void 0,c=Promise.resolve(void 0),l++,y=void 0,g=!1,u())},on:r.on}}const ce=Symbol.for("atomirx.atom");function tr(e){return Object.assign(e,{use(r){const t=r(e);return t?typeof t=="object"||typeof t=="function"?"use"in t?t:tr(t):t:e}})}function Vo(e,r={}){var g;const t="fallback"in r,a=r.fallback,s=rr({equals:r.equals,fallback:a,hasFallback:t});let n=!1;const i=u=>{const v=s.getVersion();u.then(f=>{s.isVersionStale(v)||s.setValue(f)},f=>{s.isVersionStale(v)||s.setError(f)})},o=u=>typeof u=="function"&&!S(u),c=()=>{if(!n){if(n=!0,o(e))try{const u=e();if(S(u)){s.setLoading(u,!0),i(u);return}s.setValue(u,!0);return}catch(u){s.setError(u,!0);return}if(S(e)){s.setLoading(e,!0),i(e);return}s.setValue(e,!0)}},l=u=>{c();const v=s.getValue(),f=s.getLoading(),d=s.getError(),_=s.getPromise();if(typeof u=="function")try{const p=u;if(f){const L=_.then(p);s.setLoading(L),i(L);return}if(d)return;const $=p(v);s.setValue($),s.markDirty();return}catch(p){s.setError(p);return}if(S(u)){s.setLoading(u),i(u);return}s.setValue(u),s.markDirty()},y=tr({[ce]:!0,key:r.key,meta:r.meta,get value(){return c(),s.getValue()},get loading(){return c(),s.getLoading()},get error(){return c(),s.getError()},stale(){return c(),s.stale()},dirty(){return s.isDirty()},then(u,v){return c(),s.getPromise().then(u,v)},set:l,reset(){n&&(n=!1,s.reset())},on:s.on});return(g=m.current)==null||g.call(m,{type:"mutable",key:r.key,meta:r.meta,atom:y}),y}function j(e){try{return{status:"resolved",value:e(),error:void 0,promise:void 0}}catch(r){return S(r)?{status:"loading",value:void 0,error:void 0,promise:r}:{status:"rejected",value:void 0,error:r,promise:void 0}}}class k extends Error{constructor(t,a="All getters rejected"){super(a);b(this,"errors");this.name="AllGettersRejectedError",this.errors=t}}function Ko(e,r){return new Promise((t,a)=>{if(e.length===0){a(r([]));return}const s=new Array(e.length);let n=0;e.forEach((i,o)=>{Promise.resolve(i).then(t,c=>{s[o]=c,n++,n===e.length&&a(r(s))})})})}function Wo(e){const r=Object.keys(e);if(r.length===0)return;const t=[];for(const a of r){const s=j(e[a]);if(s.status==="resolved")return[a,s.value];if(s.status==="rejected")throw s.error;t.push(s.promise)}throw Promise.race(t)}function Jo(e){return Array.isArray(e)?Xo(e):Yo(e)}function Xo(e){if(e.length===0)return[];const r=[],t=[];let a,s=!1;for(const n of e){const i=j(n);i.status==="resolved"?r.push(i.value):i.status==="rejected"?s||(a=i.error,s=!0):t.push(i.promise)}if(s)throw a;if(t.length>0)throw Promise.all(t);return r}function Yo(e){const r=Object.keys(e);if(r.length===0)return{};const t={},a=[];let s,n=!1;for(const i of r){const o=j(e[i]);o.status==="resolved"?t[i]=o.value:o.status==="rejected"?n||(s=o.error,n=!0):a.push(o.promise)}if(n)throw s;if(a.length>0)throw Promise.all(a);return t}function Zo(e){const r=Object.keys(e);if(r.length===0)throw new k({});const t={},a=[];for(const s of r){const n=j(e[s]);if(n.status==="resolved")return[s,n.value];n.status==="rejected"?t[s]=n.error:a.push(n.promise)}throw a.length>0?Ko(a,s=>{const n={};return s.forEach((i,o)=>{n[r[o]||String(o)]=i}),new k(n)}):new k(t)}function Qo(e){return Array.isArray(e)?eu(e):ru(e)}function eu(e){if(e.length===0)return[];const r=[],t=[];for(const a of e){const s=j(a);s.status==="resolved"?r.push({status:"resolved",value:s.value}):s.status==="rejected"?r.push({status:"rejected",error:s.error}):t.push(s.promise)}if(t.length>0)throw Promise.all(t);return r}function ru(e){const r=Object.keys(e);if(r.length===0)return{};const t={},a=[];for(const s of r){const n=j(e[s]);n.status==="resolved"?t[s]={status:"resolved",value:n.value}:n.status==="rejected"?t[s]={status:"rejected",error:n.error}:a.push(n.promise)}if(a.length>0)throw Promise.all(a);return t}let R=0;function tu(e){if(R++,R===1){let r=new Set;const t=a=>{r.add(a)};try{return z.use([se(t)],e)}finally{R--,z.use([se(t)],()=>{for(;r.size>0;){const a=r;r=new Set;for(const s of a)s()}})}}try{return e()}finally{R--}}function au(e,r){let t,a;const s=o=>{o&&typeof o=="object"&&"dispose"in o&&typeof o.dispose=="function"&&o.dispose()},n=()=>{s(t),t=void 0};return Object.assign(()=>{var o;return t||(a?t=a(e):t=e(),(o=m.current)==null||o.call(m,{type:"module",key:r==null?void 0:r.key,meta:r==null?void 0:r.meta,module:t})),t},{key:r==null?void 0:r.key,override:o=>{if(t!==void 0)throw new Error("Cannot override after initialization. Call override() before accessing the service.");a=o},reset:()=>{a=void 0,n()},invalidate:()=>{a=void 0,n()},isOverridden:()=>a!==void 0,isInitialized:()=>t!==void 0})}function ie(e){return e&&typeof e=="object"&&e[ce]===!0}function ar(e,r){const t=new Set,a=n=>()=>{if(t.add(n),n.stale())return n.value;if(n.loading)throw n;if(n.error!==void 0)throw n.error;return n.value};let s;ie(e)?s=a(e):s=e.map(i=>a(i));try{let n;return ie(e)?n=r(s):n=r(...s),{value:n,error:void 0,promise:void 0,dependencies:t}}catch(n){return S(n)?{value:void 0,error:void 0,promise:n,dependencies:t}:{value:void 0,error:n,promise:void 0,dependencies:t}}}function nu(e,r,t){var g;const a=rr();let s=null,n=!1;const i=new Map,o=u=>{for(const[v,f]of i)u.has(v)||(f(),i.delete(v));for(const v of u)if(!i.has(v)){const f=v.on(()=>{c()});i.set(v,f)}},c=(u=!1)=>{const v=a.getVersion(),f=ar(e,r);o(f.dependencies),f.promise!==void 0?(s=f.promise,f.promise.then(()=>{a.isVersionStale(v)||c()},d=>{a.isVersionStale(v)||(s=null,a.setError(d))}),u||a.setLoading(f.promise,u)):f.error!==void 0?(s=null,a.setError(f.error,u)):(s=null,a.setValue(f.value,u))},l=()=>{n||(n=!0,c(!0))},y={[ce]:!0,key:void 0,meta:t==null?void 0:t.meta,get value(){return l(),a.getValue()},get loading(){return l(),s!==null},get error(){return l(),a.getError()},stale(){return!1},then(u,v){if(l(),s!==null){const _=a.getVersion();return s.then(()=>{a.isVersionStale(_)&&c();const p=a.getError();if(p!==void 0)return v?v(p):Promise.reject(p);const $=a.getValue();return u?u($):$},p=>v?v(p):Promise.reject(p))}const f=a.getError();if(f!==void 0)return v?Promise.resolve(v(f)):Promise.reject(f);const d=a.getValue();return u?Promise.resolve(u(d)):Promise.resolve(d)},on(u){return l(),a.on(u)}};return(g=m.current)==null||g.call(m,{type:"derived",key:void 0,meta:t==null?void 0:t.meta,atom:y}),y}exports.AllGettersRejectedError=k;exports.all=Jo;exports.any=Zo;exports.atom=Vo;exports.batch=tu;exports.define=au;exports.derived=nu;exports.emitter=qe;exports.getterStatus=j;exports.isAtom=ie;exports.isPromiseLike=S;exports.race=Wo;exports.resolveEquality=er;exports.select=ar;exports.settled=Qo;exports.shallowEqual=M;exports.tryStabilize=Bo;
